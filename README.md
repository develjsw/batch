### NestJS Batch Server

- **Redis 기반 분산 락 적용**
  - Batch 서버가 다중 인스턴스로 실행되거나, Docker 기반으로 컨테이너가 수평 확장되는 환경에서 **Cron Job의 중복 실행을 방지**하기 위해 Redis 분산 락을 적용
  - Cron 주기의 약 70% 수준으로 **락 만료 시간(TTL)** 을 설정하여, 작업 도중 중단되더라도 다음 주기 실행에 영향을 주지 않도록 설계
    - TTL이 너무 짧으면 작업이 완료되기 전에 락이 만료되어 **중복 실행 위험**이 존재
    - 반대로 TTL이 너무 길면, 작업 실패 후 락이 해제되지 않았을 경우 **다음 주기 실행이 지연될 수 있음**
    - 다만, 현재 구조에서는 작업 실패 시에도 `finally` 블록을 통해 락을 명시적으로 해제하기 때문에, 일반적인 경우 TTL이 남아 있어도 락은 **즉시 해제됨**
    - 그럼에도 불구하고 서버 다운, 네트워크 장애 등으로 `finally`가 실행되지 못하는 예외 상황에 대비해, TTL은 **백업 안전장치로 반드시 필요**
    - 따라서 TTL을 Cron 주기의 약 70%로 설정하면, **작업 완료 보장과 장애 복구 속도 사이의 균형을 확보**할 수 있음
  - `ioredis`와 `redlock` 라이브러리 사용
    - `redlock`은 약 3년 전 5.0.0-beta.2 버전 이후로 업데이트는 없지만, **가장 널리 사용되는 Redis 기반 분산 락 구현체**이며 안정성이 입증되어 있어 대체 없이 사용


- **Graceful Shutdown 적용**